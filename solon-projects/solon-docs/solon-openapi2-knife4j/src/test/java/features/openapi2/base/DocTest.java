package features.openapi2.base;

import demo.openapi2.base.App;
import io.swagger.models.Scheme;
import org.junit.jupiter.api.Test;
import org.noear.solon.docs.DocDocket;
import org.noear.solon.docs.openapi2.OpenApi2Utils;
import org.noear.solon.test.SolonTest;

/**
 *
 * @author noear 2025/12/17 created
 *
 */
@SolonTest(App.class)
public class DocTest {
    @Test
    public void test() throws Exception {
        DocDocket docDocket = new DocDocket()
                .groupName("app端接口")
                .schemes(Scheme.HTTP.toValue())
                .apis("demo.openapi2.base");

        String json = OpenApi2Utils.getSwaggerJson(docDocket, "app端接口");

        System.out.println(json);

        assert "{\"swagger\":\"2.0\",\"info\":{\"description\":\"app端接口\"},\"host\":\"localhost:8081\",\"tags\":[{\"name\":\"用户信息表 控制器\",\"description\":\"test/user (UserController)\"}],\"schemes\":[\"http\"],\"paths\":{\"/test/user\":{\"post\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"新增用户信息\",\"description\":\"\",\"operationId\":\"post__test_user\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"userId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"tenantId\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"deptId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"userName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"nickName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"certificateNumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"userType\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"email\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"phonenumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"sex\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"avatar\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"password\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"status\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"delFlag\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginIp\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginDate\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"remark\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"serialVersionUID\",\"in\":\"query\",\"required\":false,\"type\":\"long\"},{\"name\":\"searchValue\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"createDept\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"updateBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"updateTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"params\",\"in\":\"query\",\"required\":false,\"type\":\"object\"}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false},\"put\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id更新用户信息\",\"description\":\"\",\"operationId\":\"put__test_user\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"userId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"tenantId\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"deptId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"userName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"nickName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"certificateNumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"userType\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"email\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"phonenumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"sex\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"avatar\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"password\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"status\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"delFlag\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginIp\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginDate\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"remark\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"serialVersionUID\",\"in\":\"query\",\"required\":false,\"type\":\"long\"},{\"name\":\"searchValue\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"createDept\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"updateBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"updateTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"params\",\"in\":\"query\",\"required\":false,\"type\":\"object\"}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}},\"/test/user/list\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"查询用户列表\",\"description\":\"\",\"operationId\":\"get__test_user_list\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"userId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"tenantId\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"deptId\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"userName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"nickName\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"certificateNumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"userType\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"email\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"phonenumber\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"sex\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"avatar\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"password\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"status\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"delFlag\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginIp\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"loginDate\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"remark\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"serialVersionUID\",\"in\":\"query\",\"required\":false,\"type\":\"long\"},{\"name\":\"searchValue\",\"in\":\"query\",\"required\":false,\"type\":\"String\"},{\"name\":\"createDept\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"createTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"updateBy\",\"in\":\"query\",\"required\":false,\"type\":\"Long\"},{\"name\":\"updateTime\",\"in\":\"query\",\"required\":false,\"type\":\"LocalDateTime\"},{\"name\":\"params\",\"in\":\"query\",\"required\":false,\"type\":\"object\"}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}},\"/test/user/page\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"page\",\"description\":\"\",\"operationId\":\"get__test_user_page\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}},\"/test/user/{id}\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id查询用户信息\",\"description\":\"\",\"operationId\":\"get__test_user_{id}\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"id\",\"in\":\"query\",\"required\":false,\"type\":\"Long\",\"readOnly\":false}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}},\"/test/user/{ids}\":{\"delete\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"删除用户信息\",\"description\":\"\",\"operationId\":\"delete__test_user_{ids}\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"ids\",\"in\":\"query\",\"required\":false,\"type\":\"String\",\"readOnly\":false}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}},\"/test/user/info/{id}\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id查询用户信息2\",\"description\":\"\",\"operationId\":\"get__test_user_info_{id}\",\"consumes\":[\"application/x-www-form-urlencoded\"],\"produces\":[\"*/*\"],\"parameters\":[{\"name\":\"id\",\"in\":\"query\",\"required\":false,\"type\":\"Long\",\"readOnly\":false}],\"responses\":{},\"responsesObject\":{},\"deprecated\":false}}},\"definitions\":{\"UserBo\":{\"type\":\"object\",\"properties\":{\"userId\":{\"type\":\"long\"},\"tenantId\":{\"type\":\"string\"},\"deptId\":{\"type\":\"long\"},\"userName\":{\"type\":\"string\"},\"nickName\":{\"type\":\"string\"},\"certificateNumber\":{\"type\":\"string\"},\"userType\":{\"type\":\"string\"},\"email\":{\"type\":\"string\"},\"phonenumber\":{\"type\":\"string\"},\"sex\":{\"type\":\"string\"},\"avatar\":{\"type\":\"long\"},\"password\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"delFlag\":{\"type\":\"string\"},\"loginIp\":{\"type\":\"string\"},\"loginDate\":{\"type\":\"localdatetime\"},\"remark\":{\"type\":\"string\"},\"searchValue\":{\"type\":\"string\"},\"createDept\":{\"type\":\"long\"},\"createBy\":{\"type\":\"long\"},\"createTime\":{\"type\":\"localdatetime\"},\"updateBy\":{\"type\":\"long\"},\"updateTime\":{\"type\":\"localdatetime\"},\"params\":{\"type\":\"map\"}},\"title\":\"UserBo\"}}}"
                .length() == json.length();
    }
}
