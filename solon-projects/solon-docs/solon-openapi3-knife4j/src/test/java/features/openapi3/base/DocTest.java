package features.openapi3.base;

import demo.openapi3.base.App;
import org.junit.jupiter.api.Test;
import org.noear.solon.docs.DocDocket;
import org.noear.solon.docs.openapi3.OpenApi3Utils;
import org.noear.solon.test.SolonTest;

/**
 * @author noear 2025/12/17 created
 */
@SolonTest(App.class)
public class DocTest {
    @Test
    public void test() throws Exception {
        DocDocket docDocket = new DocDocket()
                .groupName("app端接口")
                .apis("demo.openapi3.base");

        String json = OpenApi3Utils.getSwaggerJson(docDocket);

        System.out.println(json);

        assert "{\"openapi\":\"3.0.1\",\"info\":{},\"servers\":[{\"url\":\"localhost:9081\"}],\"tags\":[{\"name\":\"用户信息表 控制器\",\"description\":\"\"}],\"paths\":{\"/test/user/page\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"page\",\"description\":\"\",\"operationId\":\"get__test_user_page\",\"parameters\":[],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/Page\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/pageResult\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"pageResult\",\"description\":\"\",\"operationId\":\"get__test_user_pageResult\",\"parameters\":[],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/PageResult«UserVo»\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/pageResultImpl\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"pageResultImpl\",\"description\":\"\",\"operationId\":\"get__test_user_pageResultImpl\",\"parameters\":[],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/PageResultImpl«UserVo»\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user\":{\"put\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id更新用户信息\",\"description\":\"\",\"operationId\":\"put__test_user\",\"parameters\":[{\"name\":\"userBo\",\"in\":\"query\",\"description\":\"UserBo\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/UserBo\",\"exampleSetFlag\":false}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/boolean\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false},\"post\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"新增用户信息\",\"description\":\"\",\"operationId\":\"post__test_user\",\"parameters\":[{\"name\":\"userBo\",\"in\":\"query\",\"description\":\"UserBo\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/UserBo\",\"exampleSetFlag\":false}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/boolean\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/list\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"查询用户列表\",\"description\":\"\",\"operationId\":\"get__test_user_list\",\"parameters\":[{\"name\":\"userBo\",\"in\":\"query\",\"description\":\"UserBo\",\"required\":false,\"schema\":{\"$ref\":\"#/components/schemas/UserBo\",\"exampleSetFlag\":false}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"array\",\"exampleSetFlag\":false,\"items\":{\"$ref\":\"#/components/schemas/UserVo\",\"exampleSetFlag\":false},\"types\":[\"array\"]},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/{id}\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id查询用户信息\",\"description\":\"\",\"operationId\":\"get__test_user_{id}\",\"parameters\":[{\"name\":\"id\",\"in\":\"query\",\"required\":false,\"schema\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/UserVo\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/info/{id}\":{\"get\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"根据Id查询用户信息2\",\"description\":\"\",\"operationId\":\"get__test_user_info_{id}\",\"parameters\":[{\"name\":\"id\",\"in\":\"query\",\"required\":false,\"schema\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/Result«UserVo»\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}},\"/test/user/{ids}\":{\"delete\":{\"tags\":[\"用户信息表 控制器\"],\"summary\":\"删除用户信息\",\"description\":\"\",\"operationId\":\"delete__test_user_{ids}\",\"parameters\":[{\"name\":\"ids\",\"in\":\"query\",\"required\":false,\"schema\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]}}],\"responses\":{\"200\":{\"description\":\"OK\",\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/boolean\",\"exampleSetFlag\":false},\"exampleSetFlag\":false}}}},\"deprecated\":false}}},\"components\":{\"schemas\":{\"Page\":{\"title\":\"Page\",\"type\":\"object\",\"properties\":{\"pageSize\":{\"type\":\"int\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"pageNumber\":{\"type\":\"int\",\"exampleSetFlag\":false,\"types\":[\"string\"]}},\"exampleSetFlag\":false},\"PageResult«UserVo»\":{\"title\":\"PageResult«UserVo»\",\"type\":\"object\",\"properties\":{\"data\":{\"type\":\"array\",\"description\":\"PageResult«UserVo»\",\"exampleSetFlag\":false,\"items\":{\"description\":\"PageResult«UserVo»\",\"$ref\":\"#/components/schemas/UserVo\",\"exampleSetFlag\":false},\"types\":[\"array\"]},\"total\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]}},\"exampleSetFlag\":false},\"UserVo\":{\"title\":\"UserVo\",\"type\":\"object\",\"properties\":{\"userId\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"tenantId\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"deptId\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"userName\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"nickName\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"certificateNumber\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"userType\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"email\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"phonenumber\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"sex\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"avatar\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"password\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"status\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"delFlag\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"loginIp\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"loginDate\":{\"type\":\"localdatetime\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"remark\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]}},\"exampleSetFlag\":false},\"PageResultImpl«UserVo»\":{\"title\":\"PageResultImpl«UserVo»\",\"type\":\"object\",\"properties\":{\"total\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"data\":{\"type\":\"array\",\"description\":\"PageResultImpl«UserVo»\",\"exampleSetFlag\":false,\"items\":{\"description\":\"PageResultImpl«UserVo»\",\"$ref\":\"#/components/schemas/UserVo\",\"exampleSetFlag\":false},\"types\":[\"array\"]}},\"exampleSetFlag\":false},\"UserBo\":{\"title\":\"UserBo\",\"type\":\"object\",\"properties\":{\"userId\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"tenantId\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"deptId\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"userName\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"nickName\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"certificateNumber\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"userType\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"email\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"phonenumber\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"sex\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"avatar\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"password\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"status\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"delFlag\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"loginIp\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"loginDate\":{\"type\":\"localdatetime\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"remark\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"searchValue\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"createDept\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"createBy\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"createTime\":{\"type\":\"localdatetime\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"updateBy\":{\"type\":\"long\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"updateTime\":{\"type\":\"localdatetime\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"params\":{\"type\":\"map\",\"exampleSetFlag\":false,\"types\":[\"string\"]}},\"exampleSetFlag\":false},\"boolean\":{\"title\":\"boolean\",\"type\":\"object\",\"properties\":{},\"exampleSetFlag\":false},\"Result«UserVo»\":{\"title\":\"Result«UserVo»\",\"type\":\"object\",\"properties\":{\"code\":{\"type\":\"int\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"description\":{\"type\":\"string\",\"exampleSetFlag\":false,\"types\":[\"string\"]},\"data\":{\"$ref\":\"#/components/schemas/UserVo\",\"exampleSetFlag\":false}},\"exampleSetFlag\":false}}}}"
                .length() == json.length();
    }
}
